(function($) {
    "use strict";

    // Windows load

    $(window).on("load", function() {

        // Site loader 

        $(".loader-inner").fadeOut();
        $(".loader").delay(200).fadeOut("slow");

    });


    // Scroll to

    $('a.scroll').smoothScroll({
        speed: 800,
        offset: -60
    });



    // Site navigation setup

    var header = $('.header'),
        pos = header.offset(),
        blockTop = $('.block-top');

    $(window).scroll(function() {
        if ($(this).scrollTop() > pos.top + 500 && header.hasClass('default')) {
            header.fadeOut('fast', function() {
                $(this).removeClass('default').addClass('switched-header').fadeIn(200);
                blockTop.addClass('active');
            });
        } else if ($(this).scrollTop() <= pos.top + 500 && header.hasClass('switched-header')) {
            header.fadeOut('fast', function() {
                $(this).removeClass('switched-header').addClass('default').fadeIn(100);
                blockTop.removeClass('active');
            });
        }
    });




    //Hero resize


    var mainHero = $(" .hero .main-slider .slides li");
    function mainHeroResize() {
        mainHero.css('height', $(window).height());
    }

    $(function() {
            mainHeroResize()
        }),
        $(window).resize(function() {
            mainHeroResize()
        });




    // Slider

    $('.main-slider').flexslider({
        animation: "fade",
        slideshow: true,
        directionNav: false,
        controlNav: true,
        pauseOnAction: false,
        animationSpeed: 1000
    });

    // Mobile menu

    var mobileBtn = $('.mobile-but');
    var nav = $('.main-nav ul.main-menu');
    var navHeight = nav.height();

    $(mobileBtn).on("click", function() {
        $(".toggle-mobile-but").toggleClass("active");
        nav.slideToggle();
        $('.main-nav li a').addClass('mobile');
        return false;


    });



    $(window).resize(function() {
        var w = $(window).width();
        if (w > 320 && nav.is(':hidden')) {
            nav.removeAttr('style');
            $('.main-nav li a').removeClass('mobile');
        }

    });


    // Append images as css background

    $('.background-img').each(function() {
        var path = $(this).children('img').attr('src');
        $(this).css('background-image', 'url("' + path + '")').css('background-position', 'initial');
    });


        
})(jQuery);

function handleCheckboxChange(checkbox) {
    if(checkbox.checked == true){
        $(checkbox).parent().find('div').css('text-decoration', 'line-through');
    }else{
        $(checkbox).parent().find('div').css('text-decoration', '');
   }
}

function onAddTaskSubmit() {
    var newTask = $("#new-task").val();
    if(newTask) {
        if($('#completed-tasks li').text().trim() == 'Start tracking a task to the left.'){ 
            $('#completed-tasks').empty();
        }

        var checkbox = $('<input>');
        checkbox.attr('type', 'checkbox');
        checkbox.attr('onchange', 'handleCheckboxChange(this);');

        var taskDiv = $('<div>');
        taskDiv.addClass('form-control form-control-lg');
        taskDiv.html(newTask);

        var newLI = $('<li>');
        newLI.append(checkbox);
        newLI.append(taskDiv);

        $('#completed-tasks').append(newLI);
        $("#new-task").val('');
    }
    return false;
}

